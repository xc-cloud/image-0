$((function(){function ice_snowflake(){this.ice_document=null,this.led_document=null,this.snowflake_document=null,this.control=null}if(ice_snowflake.prototype={ice_click(){var parent=document.createElement("div");$(parent).css({position:"fixed","z-index":1001,left:0,top:0,opacity:0,height:$(window).height(),width:"100%","pointer-events":"none"});var left=document.createElement("div"),right=document.createElement("div"),top=document.createElement("div"),bottom=document.createElement("div");parent.appendChild(left),parent.appendChild(right),parent.appendChild(top),parent.appendChild(bottom),$(parent).children().css({position:"absolute",width:"500%",height:"100px","background-image":"url(/image/image/ice.png)","background-repeat":"repeat-x","background-size":"contain","background-position":"center bottom"}),$(left).css({top:"-133px",left:0,"transform-origin":"0 100px",transform:"rotate(90deg)"}),$(right).css({top:"100%",left:"calc(100% - 100px)","transform-origin":"0 0",transform:"rotate(-90deg)"}),$(top).css({left:0,top:0,transform:"rotate(180deg)"}),$(bottom).css({left:0,bottom:0}),$(parent).animate({opacity:1},2e3,(function(){$("#top-clear").animate({height:"100px"},500),$("#top").animate({"padding-top":"50px"},500)})),document.body.appendChild(parent),this.ice_document=parent},ice_unclick(){let that=this;$(this.ice_document).animate({opacity:0},1e3,(function(){document.body.removeChild(that.ice_document),$("#top-clear").animate({height:"50px"},500),$("#top").animate({"padding-top":"0px"},500)}))},valid(){if(null==angular.element(document.body).scope().body||null==angular.element(document.body).scope().body.nightIndex||angular.element(document.body).scope().body.nightIndex<4)throw modal.error("该主题不支持开启该动画，目前仅支持（深邃、暗黑、新年）"),""},led_click(){var parent=document.createElement("div");$(parent).css({position:"fixed","z-index":1002,left:0,top:0,opacity:0,height:$(window).height(),width:"100%","pointer-events":"none"});var left=document.createElement("div"),right=document.createElement("div"),top=document.createElement("div"),bottom=document.createElement("div");parent.appendChild(left),parent.appendChild(right),parent.appendChild(top),parent.appendChild(bottom),$(parent).children().css({position:"absolute",width:"500%",height:"100px","background-image":"url(/image/image/led.png)","background-repeat":"repeat-x","background-size":"contain","background-position":"center bottom"}),$(left).css({top:"-133px",left:0,"transform-origin":"0 100px",transform:"rotate(90deg)"}),$(right).css({top:"100%",left:"calc(100% - 100px)","transform-origin":"0 0",transform:"rotate(-90deg)"}),$(top).css({left:0,top:0,transform:"rotate(180deg)"}),$(bottom).css({left:0,bottom:0}),$(parent).animate({opacity:1},2e3),document.body.appendChild(parent),this.led_document=parent},led_unclick(){let that=this;$(this.led_document).animate({opacity:0},1e3,(function(){document.body.removeChild(that.led_document)}))},snowflake_click(){var parent=document.createElement("div");$(parent).css({position:"fixed","z-index":1e3,left:0,top:0,height:$(window).height(),width:"100%","pointer-events":"none"});var left=document.createElement("div"),right=document.createElement("div"),top=document.createElement("div"),bottom=document.createElement("div"),style=document.createElement("style");parent.appendChild(left),parent.appendChild(right),parent.appendChild(top),parent.appendChild(bottom),$(parent).children().css({position:"absolute",width:"100%",left:0,top:"-100%",height:$(parent).height(),"background-image":"url(/image/image/snowflake.png)","animation-timing-function":"linear","animation-iteration-count":"infinite"});let children=$(parent).children();style.innerHTML="\n            @keyframes snow_falling_fore {\n                0% {top: -100%;opacity: 0}\n                1% {top: -100%;opacity: 1}\n                99.8% {top: 100%;opacity: 1}\n                99.9% {opacity: 0}\n                100% {top: -100%;opacity: 0}\n            }\n            @keyframes snow_falling_mid {\n                0% {top: -100%;opacity: 0}\n                1% {top: -100%;opacity: 1}\n                99.8% {top: 100%;opacity: 1}\n                99.9% {opacity: 0}\n                100% {top: -100%;opacity: 0}\n            }\n            ",parent.appendChild(style),$(children[0]).css({"animation-name":"snow_falling_fore","animation-delay":"0s","animation-duration":"50s"}),$(children[1]).css({"animation-name":"snow_falling_fore","animation-delay":"25s","animation-duration":"50s"}),$(children[2]).css({"animation-name":"snow_falling_mid","animation-delay":"0s",opacity:".5","animation-duration":"70s","background-position-x":"50%"}),$(children[3]).css({"animation-name":"snow_falling_mid","animation-delay":"35s",opacity:".5","animation-duration":"70s","background-position-x":"50%"}),document.body.appendChild(parent),this.snowflake_document=parent},snowflake_unclick(){let that=this;$(this.snowflake_document).animate({opacity:0},1e3,(function(){document.body.removeChild(that.snowflake_document)}))},uninstall(){document.body.removeChild(this.control)},initIceSnowflake(){var that=this,control=document.createElement("div");this.control=control,$(control).css({position:"fixed","z-index":1003,width:"52px",overflow:"hidden",bottom:"50px",right:"50px",display:"flex","border-radius":"5px","background-color":"rgba(34,34,34,.8)",padding:"5px",transition:"width 0.3s"});var rightLine=document.createElement("div"),rightLine_item=1;rightLine.onclick=function(){1==rightLine_item?(rightLine_item=0,$(control).css({width:10+42*$(control).children().length+"px"}),$(this).css({transform:"rotate(0deg)"})):(rightLine_item=1,$(control).css({width:"50px"}),$(this).css({transform:"rotate(180deg)"}))},rightLine.style.transform="rotate(180deg)",rightLine.appendChild(this.getRightLine());var snowflake=document.createElement("div"),snowflake_item=1;snowflake.appendChild(this.getSnowflakeIcon()),snowflake.onclick=function(){that.valid(),1==snowflake_item?($(this).addClass("btn-ice-hover"),snowflake_item=0,that.snowflake_click()):(snowflake_item=1,that.snowflake_unclick(),$(this).removeClass("btn-ice-hover"))};var ice=document.createElement("div"),ice_item=1;ice.onclick=function(){that.valid(),1==ice_item?($(this).addClass("btn-ice-hover"),ice_item=0,that.ice_click()):(ice_item=1,that.ice_unclick(),$(this).removeClass("btn-ice-hover"))},ice.appendChild(this.getIceIcon());var heart=document.createElement("div"),heart_item=1;heart.onclick=function(){null!=window.hereHeart?1==heart_item?($(this).addClass("btn-ice-hover"),heart_item=0,window.hereHeart.start()):(heart_item=1,window.hereHeart.stop(),$(this).removeClass("btn-ice-hover")):modal.error("heart 插件尚未安装，请联系管理员处理")};let heart_i=document.createElement("i");heart_i.style.fontSize="20px",heart_i.style.padding="1px",heart_i.className="glyphicon glyphicon-heart-empty",heart.appendChild(heart_i);var tree=document.createElement("div"),tree_item=1;tree.onclick=function(){that.valid(),1==tree_item?($(this).addClass("btn-ice-hover"),tree_item=0,that.led_click()):(tree_item=1,that.led_unclick(),$(this).removeClass("btn-ice-hover"))};let tree_i=document.createElement("i");tree_i.style.fontSize="20px",tree_i.style.padding="1px",tree_i.className="glyphicon glyphicon-certificate",tree.appendChild(tree_i);var close=document.createElement("div");close.onclick=function(){modal.alert("关闭后，将有一段时间不会出现，确定要关闭吗？",(function(){localStorage.setItem("ice","close"),that.uninstall()}))};let close_i=document.createElement("i");close_i.style.fontSize="20px",close_i.style.padding="1px",close_i.className="glyphicon glyphicon-remove",close.appendChild(close_i);var goTop=document.createElement("div");goTop.onclick=function(){let _this=this;$(this).addClass("btn-ice-hover"),$("html,body").stop(!0).animate({scrollTop:"0px"},500,(function(){$(_this).removeClass("btn-ice-hover")}))};let goTop_i=document.createElement("i");goTop_i.style.fontSize="20px",goTop_i.style.padding="1px",goTop_i.className="glyphicon glyphicon-menu-up",goTop.appendChild(goTop_i),control.appendChild(rightLine),control.appendChild(snowflake),control.appendChild(ice),control.appendChild(heart),control.appendChild(tree),control.appendChild(close),control.appendChild(goTop),$(control).children().css({width:"32px",height:"32px",cursor:"pointer",color:"#fff",padding:"4px",margin:"5px","border-radius":"5px",transition:"background .3s"}),$(control).children().hover((function(){$(this).css("background-color","rgba(255,255,255,.5)")}),(function(){$(this).css("background-color","transparent")})),document.body.appendChild(control)},getRightLine(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("width",24),svg.setAttribute("height",24),svg.setAttribute("viewBox","0 0 24 24");let path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d","M 9 6 l 6 6 M 15 12 l -6 6"),path.setAttribute("stroke-width","1"),path.setAttribute("fill","none"),path.setAttribute("stroke","#fff"),svg.appendChild(path),svg},getSnowflakeIcon(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("width",24),svg.setAttribute("height",24),svg.setAttribute("viewBox","0 0 24 24");let path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d","M14.2082 2.35254C14.0134 2.15766 13.6977 2.15706 13.5022 2.3512L12.3926 3.45307L11.2836 2.35133C11.0881 2.15713 10.7723 2.1577 10.5775 2.35261L10.3883 2.54201C10.1931 2.73727 10.1931 3.05372 10.3883 3.24895L11.7558 4.61689V10.8956L6.32333 7.76135L5.82515 5.88653C5.75422 5.61959 5.48028 5.46073 5.21336 5.53174L4.94474 5.60321C4.67833 5.67409 4.51956 5.94723 4.5898 6.21381L4.9897 7.73135L3.48376 8.13065C3.21666 8.20147 3.05766 8.47552 3.12873 8.74256L3.19976 9.00939C3.27077 9.27616 3.54454 9.4349 3.81134 9.36401L5.68652 8.86573L11.119 12L5.68652 15.1343L3.81139 14.636C3.54457 14.5651 3.27078 14.7239 3.1998 14.9907L3.1287 15.2579C3.05764 15.525 3.21672 15.7991 3.48387 15.8698L4.9897 16.2687L4.58982 17.7866C4.51957 18.0532 4.67846 18.3264 4.94497 18.3972L5.21352 18.4685C5.48038 18.5394 5.75419 18.3805 5.8251 18.1137L6.32333 16.2386L11.7558 13.1044V19.3831L10.3883 20.7511C10.1931 20.9463 10.1931 21.2627 10.3883 21.458L10.5775 21.6474C10.7723 21.8423 11.0881 21.8429 11.2836 21.6487L12.3926 20.5469L13.5022 21.6488C13.6977 21.8429 14.0134 21.8423 14.2082 21.6475L14.3975 21.458C14.5926 21.2628 14.5926 20.9463 14.3974 20.7511L13.0294 19.3831V13.1044L18.463 16.2386L18.9613 18.1137C19.0322 18.3805 19.306 18.5394 19.5729 18.4685L19.8413 18.3972C20.1078 18.3264 20.2667 18.0532 20.1964 17.7865L19.7961 16.2687L21.3019 15.8698C21.5691 15.7991 21.7282 15.525 21.6571 15.2579L21.586 14.9907C21.515 14.7239 21.2412 14.5651 20.9744 14.636L19.0999 15.1343L13.6663 12L19.0999 8.86573L20.9744 9.36397C21.2413 9.43488 21.515 9.27614 21.5861 9.00936L21.6571 8.74256C21.7281 8.47552 21.5691 8.20147 21.302 8.13065L19.7961 7.73135L20.1964 6.2139C20.2667 5.94729 20.108 5.67407 19.8415 5.60318L19.573 5.53174C19.3061 5.46073 19.0322 5.61959 18.9612 5.88653L18.463 7.76135L13.0294 10.8956V4.61689L14.3974 3.24895C14.5926 3.05373 14.5926 2.73723 14.3975 2.54195L14.2082 2.35254Z"),path.setAttribute("fill-rule","evenodd"),path.setAttribute("clip-rule","evenodd"),path.setAttribute("fill","#fff"),svg.appendChild(path),svg},getIceIcon(){var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("width",24),svg.setAttribute("height",24),svg.setAttribute("viewBox","0 0 24 24");let path=document.createElementNS("http://www.w3.org/2000/svg","path");return path.setAttribute("d","M2.5 3C2.22386 3 2 3.22386 2 3.5C2 3.77614 2.22386 4 2.5 4H21.5C21.7761 4 22 3.77614 22 3.5C22 3.22386 21.7761 3 21.5 3H2.5ZM8.04298 8.27865C7.94004 7.81447 7.52449 7.48696 7.04911 7.49532C6.57372 7.50369 6.16996 7.84562 6.08341 8.31314L4.85737 14.936L3.20223 6L20.7979 6L19.1427 14.9362L18.2067 9.88013C18.1207 9.41548 17.7211 9.07447 17.2488 9.06249C16.7764 9.05051 16.3601 9.37083 16.2506 9.83051L14.1436 18.6785L11.9464 9.42967C11.8388 8.97651 11.4325 8.65768 10.9668 8.66083C10.501 8.66398 10.0991 8.98828 9.99756 9.44286L9.14645 13.2542L8.04298 8.27865ZM19.6343 17.7733C19.5333 18.3186 18.7519 18.3185 18.651 17.7732L17.2234 10.0622L14.6295 20.9551C14.5074 21.4675 13.7783 21.4673 13.6566 20.9549L10.9735 9.66081L9.63275 15.6648C9.51624 16.1866 8.77239 16.1861 8.65663 15.6641L7.0667 8.49517L5.34914 17.7732C5.2482 18.3184 4.46686 18.3185 4.36586 17.7732L2.21896 6.18212C2.10509 5.56734 2.57699 5 3.20223 5H20.7979C21.4231 5 21.8951 5.56734 21.7812 6.18212L19.6343 17.7733Z"),path.setAttribute("fill-rule","evenodd"),path.setAttribute("clip-rule","evenodd"),path.setAttribute("fill","#fff"),svg.appendChild(path),svg}},"close"!=localStorage.getItem("ice")){let iceSnowflake=new ice_snowflake;iceSnowflake.initIceSnowflake(),window.iceSnowflake_uninstall=iceSnowflake.uninstall}}));